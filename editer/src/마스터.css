@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* 전체 앱 레이아웃 */
  .app-layout {
    @apply flex flex-row h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200;
  }
/* --- 아래 스타일들을 새로 추가합니다 --- */
  .sidebar {
    @apply h-full w-full flex-shrink-0 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col;
  }
  .resize-handle {
    @apply w-1 h-full cursor-col-resize bg-gray-200 dark:bg-gray-700 hover:bg-blue-500 flex-shrink-0;
  }
  .sidebar-header {
    @apply flex items-center gap-2 p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0;
  }
  .project-title {
    @apply text-xl font-bold;
  }
  .sidebar-content {
    @apply flex-grow p-2 overflow-y-auto;
  }

  .main-content {
    @apply flex flex-col flex-grow;
  }
  /* --- 여기까지 --- */
 /* 탭 UI */
  .sidebar-tabs {
    @apply flex border-b border-gray-200 dark:border-gray-700 flex-shrink-0;
  }
  .sidebar-tab {
    @apply px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 border-b-2 border-transparent;
    @apply hover:text-gray-700 dark:hover:text-gray-200;
    margin-bottom: -1px;
  }
  .sidebar-tab.active {
    @apply text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400 font-semibold;
  }

  /* 탭 콘텐츠 */
  .sidebar-content {
    @apply flex-grow overflow-y-auto;
  }
  .tab-pane {
    @apply hidden;
  }
  .tab-pane.active {
    @apply block;
  }
  
  /* 검색창 */
  .search-bar-container {
    @apply flex items-center gap-2 p-2 m-2 border border-gray-300 dark:border-gray-600 rounded-md;
  }
  .search-icon {
    @apply text-gray-400;
  }
  .search-input {
    @apply w-full bg-transparent focus:outline-none;
  }

  /* 트리 뷰 컨테이너 */
  .tree-view-container {
    @apply p-2;
  }

  /* 에디터 컨테이너 */
  .editor-container {
    @apply flex-1 p-8 bg-gray-200 dark:bg-gray-900 overflow-y-auto;
  }
  /* === Tiptap 에디터 관련 스타일 === */
  .tiptap-wrapper {
    @apply h-full;
  }

  .tiptap-editor {
    @apply bg-white dark:bg-gray-800 shadow-lg mx-auto;
    width: 21cm; /* A4 용지 가로 */
    min-height: 29.7cm; /* A4 용지 세로 */
    padding: 2.54cm; /* 상하좌우 1인치 여백 */
    margin-bottom: 1rem; /* 페이지와 페이지 사이의 간격 */
  }

  /* Tiptap 에디터 내부 스크롤바 */
  .ProseMirror {
    @apply prose dark:prose-invert max-w-none;
    height: auto;
    overflow-y: visible;
  }
  
  .tiptap-wrapper {
    /* 필요 시 여기에 스타일 추가 */
  }

  /* === 하단 상태바 === */
  .status-bar {
    @apply flex items-center justify-end p-1 border-t border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex-shrink-0;
  }

  /* 상태 텍스트 (하단 상태바) */
  .status-text {
    @apply text-xs text-gray-500 dark:text-gray-400 px-2;
  }

  /* === 리본 메뉴 === */

  /* 리본 메뉴 전체 컨테이너 */
  .editor-ribbon {
    @apply bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700;
  }

  /* 탭 버튼들을 감싸는 영역 */
  .ribbon-tabs {
    @apply flex px-2 border-b border-gray-200 dark:border-gray-700;
  }

  /* 개별 탭 버튼 */
  .ribbon-tab {
    @apply px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 border-b-2 border-transparent;
    @apply hover:text-gray-700 dark:hover:text-gray-200;
    margin-bottom: -1px;
  }

  /* 활성화된 탭 버튼 */
  .ribbon-tab.active {
    @apply text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400;
  }

  /* 탭 콘텐츠 영역 */
  .ribbon-content {
    @apply p-2 flex items-start gap-2;
  }

  /* 각 탭의 콘텐츠 패널 */
  .ribbon-pane {
    @apply hidden w-full items-start gap-2;
  }

  /* 활성화된 콘텐츠 패널 */
  .ribbon-pane.active {
    @apply flex;
  }

  /* 리본 메뉴 그룹 */
  .ribbon-group {
    @apply relative flex flex-col items-center justify-start p-2 border-r border-gray-200 dark:border-gray-600;
    padding-bottom: 20px;
  }
  .ribbon-group:last-child {
    @apply border-r-0;
  }

  .ribbon-group-title {
    @apply absolute bottom-1 text-xs text-gray-500 dark:text-gray-400;
  }

  /* 그룹 안의 컨트롤 행 */
  .ribbon-controls-row {
    @apply flex items-center gap-1;
  }
  
  /* 기본 리본 버튼 */
  .ribbon-button {
    @apply flex flex-col items-center justify-center gap-1 rounded p-1 min-w-[32px] hover:bg-gray-200 dark:hover:bg-gray-700;
  }
    .ribbon-button:disabled {
    @apply opacity-50 cursor-not-allowed hover:bg-transparent dark:hover:bg-transparent;
  }
  
  .ribbon-button.is-active {
    @apply bg-gray-200 dark:bg-gray-600;
  }

  .ribbon-icon {
    @apply text-xl;
  }

  .material-symbols-outlined {
    font-variation-settings:
    'FILL' 0,
    'wght' 400,
    'GRAD' 0,
    'opsz' 24;
  }
  .ribbon-label {
    @apply text-xs whitespace-nowrap;
  }

  /* 클립보드 그룹 특별 스타일 */
  .group-clipboard {
    @apply flex-row items-stretch;
  }
  .paste-button {
    @apply p-2 text-center;
  }
  .clipboard-actions {
    @apply flex items-center gap-1;
  }

  /* 입력 요소 스타일 */
  .font-dropdown, .style-dropdown { /* .style-dropdown 추가 */
    @apply bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded px-1 py-0.5 text-sm h-[32px];
    width: 150px;
  }
  .font-size-input {
    width: 150px;
    @apply bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded px-1 py-0.5 text-sm h-[32px];
  }

  /* 각 컨트롤의 최소 크기 보장 */
  .ribbon-controls-row .ribbon-button,
  .ribbon-controls-row .font-dropdown,
  .ribbon-controls-row .font-size-input,
  .ribbon-controls-row .style-dropdown { /* .style-dropdown 추가 */
    @apply min-h-[32px];
  }
  .ribbon-controls-row .ribbon-button {
     @apply min-w-[32px];
  }
  
  /* 삽입 탭의 버튼 크기 */
  .insert-button {
    @apply w-[60px] h-[50px] justify-center;
  }

  /* 사용자 정의 폰트 클래스 */
  .tiptap-editor [data-font="font-dotum"] {
    font-family: 'Dotum', sans-serif;
  }
  .tiptap-editor [data-font="font-gungseo"] {
    font-family: 'Gungsuh', serif;
  }
  .tiptap-editor [data-font="font-gulim"] {
    font-family: 'Gulim', sans-serif;
  }

  /* === 표 스타일 === */
  .tiptap-editor table {
    @apply w-full table-fixed border-collapse my-4;
  }
  .tiptap-editor th,
  .tiptap-editor td {
    @apply border border-gray-300 dark:border-gray-600 p-2 align-top relative;
    min-width: 1em;
  }
  .tiptap-editor th {
    @apply font-bold text-left bg-gray-100 dark:bg-gray-700;
  }
  /* 표 크기 조절 핸들 스타일 */
  .tableWrapper {
    @apply relative my-4 overflow-x-auto;
  }
  .resize-cursor {
    @apply absolute w-1 h-full top-0 right-[-2px] mt-[-1px] pointer-events-auto bg-blue-400 z-10;
    cursor: col-resize;
  }

  /* === 모달 스타일 (일부 수정) === */
  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20;
  }
  .modal-content {
    @apply bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-sm;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .modal-content h2 {
    @apply text-xl font-bold mt-0 mb-2 text-center; /* text-center 추가 */
  }
  .modal-field {
    @apply flex flex-col gap-1;
  }
  .modal-field label {
    @apply text-sm font-medium text-gray-700 dark:text-gray-300;
  }
  .modal-field input {
    @apply w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700;
  }
  .modal-actions {
    @apply flex justify-center gap-2 mt-2; /* justify-end를 justify-center로 변경 */
  }
  .modal-button {
    @apply px-4 py-2 rounded-md text-sm font-semibold;
    @apply bg-blue-600 text-white hover:bg-blue-700;
  }
  .modal-button.cancel {
    @apply bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500;
  }
    /* === 날짜/시간 모달 스타일 (수정 없음, 확인용) === */
  .datepicker-container {
    @apply flex justify-center;
  }
  .date-time-modal .react-datepicker {
    @apply border-none shadow-none; /* 모달 내부에 있으므로 기본 테두리 제거 */
  }

  .equation-wrapper {
    @apply my-4 p-2 border border-dashed border-gray-300 dark:border-gray-600 rounded-md cursor-pointer;
  }
  .equation-wrapper .katex-display {
    @apply m-0; /* KaTeX가 추가하는 기본 마진 제거 */
  }
}